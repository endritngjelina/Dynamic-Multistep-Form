<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microsoft Career Application - Multi-Step Form</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .form-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.1);
            padding: 40px;
            width: 100%;
            max-width: 800px;
            position: relative;
            overflow: hidden;
        }

        .form-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #0078d4, #106ebe, #005a9e);
        }

        .form-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .form-header h1 {
            color: #323130;
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #0078d4, #106ebe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .form-header p {
            color: #605e5c;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .progress-container {
            margin-bottom: 50px;
        }

        .progress-bar {
            background: #f3f2f1;
            height: 8px;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 30px;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0078d4, #106ebe);
            border-radius: 4px;
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
        }

        .step-indicator {
            display: flex;
            align-items: center;
            flex-direction: column;
            position: relative;
            z-index: 1;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #f3f2f1;
            border: 3px solid #e1dfdd;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #605e5c;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .step-circle.active {
            background: #0078d4;
            border-color: #0078d4;
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(0, 120, 212, 0.4);
        }

        .step-circle.completed {
            background: #107c10;
            border-color: #107c10;
            color: white;
        }

        .step-circle.completed::after {
            content: '‚úì';
            position: absolute;
            font-size: 16px;
            font-weight: bold;
        }

        .step-label {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #605e5c;
            font-weight: 500;
            text-align: center;
        }

        .step-label.active {
            color: #0078d4;
            font-weight: 600;
        }

        .form-step {
            display: none;
            animation: fadeInUp 0.5s ease-out;
        }

        .form-step.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
        }

        .form-group {
            flex: 1;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #323130;
            font-weight: 500;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1dfdd;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #0078d4;
            box-shadow: 0 0 0 3px rgba(0, 120, 212, 0.1);
            transform: translateY(-2px);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-group .error-message {
            color: #d13438;
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
            font-weight: 500;
        }

        .form-group.error input,
        .form-group.error select,
        .form-group.error textarea {
            border-color: #d13438;
            background: #fef6f6;
        }

        .form-group.error .error-message {
            display: block;
        }

        .form-group.success input,
        .form-group.success select,
        .form-group.success textarea {
            border-color: #107c10;
            background: #f3f9f1;
        }

        .strength-meter {
            margin-top: 8px;
            height: 4px;
            background: #f3f2f1;
            border-radius: 2px;
            overflow: hidden;
        }

        .strength-fill {
            height: 100%;
            border-radius: 2px;
            transition: all 0.3s ease;
            width: 0%;
        }

        .strength-weak { background: #d13438; }
        .strength-medium { background: #ff8c00; }
        .strength-strong { background: #107c10; }

        .checkbox-group {
            display: flex;
            align-items: center;
            margin: 20px 0;
        }

        .checkbox-group input[type="checkbox"] {
            margin-right: 12px;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-group label {
            cursor: pointer;
            font-size: 0.95rem;
            color: #323130;
            line-height: 1.5;
        }

        .file-upload {
            border: 2px dashed #e1dfdd;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        .file-upload:hover {
            border-color: #0078d4;
            background: #f8f9fa;
        }

        .file-upload.drag-over {
            border-color: #0078d4;
            background: #f0f6ff;
        }

        .file-upload input[type="file"] {
            display: none;
        }

        .file-upload-text {
            color: #605e5c;
            font-size: 1rem;
            margin-top: 10px;
        }

        .file-upload-icon {
            font-size: 2rem;
            color: #0078d4;
            margin-bottom: 10px;
        }

        .uploaded-files {
            margin-top: 15px;
        }

        .uploaded-file {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 8px;
        }

        .uploaded-file-name {
            font-size: 0.9rem;
            color: #323130;
        }

        .uploaded-file-remove {
            color: #d13438;
            cursor: pointer;
            font-size: 0.85rem;
            padding: 2px 8px;
            border-radius: 4px;
            transition: background 0.2s;
        }

        .uploaded-file-remove:hover {
            background: #fef6f6;
        }

        .form-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            gap: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: none;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, #0078d4, #106ebe);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 120, 212, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 120, 212, 0.4);
        }

        .btn-secondary {
            background: #f3f2f1;
            color: #323130;
            border: 2px solid #e1dfdd;
        }

        .btn-secondary:hover {
            background: #e1dfdd;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .review-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid #0078d4;
        }

        .review-section h3 {
            color: #323130;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .review-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 8px 0;
            border-bottom: 1px solid #e1dfdd;
        }

        .review-item:last-child {
            border-bottom: none;
        }

        .review-label {
            font-weight: 500;
            color: #605e5c;
        }

        .review-value {
            color: #323130;
            font-weight: 600;
        }

        .success-message {
            text-align: center;
            padding: 40px;
        }

        .success-icon {
            font-size: 4rem;
            color: #107c10;
            margin-bottom: 20px;
        }

        .success-message h2 {
            color: #323130;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .success-message p {
            color: #605e5c;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .loading-spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid #ffffff;
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .floating-label {
            position: relative;
            margin-bottom: 25px;
        }

        .floating-label input {
            padding: 20px 16px 8px 16px;
        }

        .floating-label label {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #605e5c;
            font-size: 1rem;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .floating-label input:focus + label,
        .floating-label input:not(:placeholder-shown) + label {
            top: 8px;
            font-size: 0.75rem;
            color: #0078d4;
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .form-container {
                padding: 20px;
                margin: 10px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .form-header h1 {
                font-size: 2rem;
            }
            
            .form-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-header">
            <h1>Microsoft Career Application</h1>
            <p>Join our team of innovators and help shape the future of technology</p>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-steps">
                <div class="step-indicator">
                    <div class="step-circle active" data-step="1">1</div>
                    <div class="step-label active">Personal Info</div>
                </div>
                <div class="step-indicator">
                    <div class="step-circle" data-step="2">2</div>
                    <div class="step-label">Professional Details</div>
                </div>
                <div class="step-indicator">
                    <div class="step-circle" data-step="3">3</div>
                    <div class="step-label">Education & Skills</div>
                </div>
                <div class="step-indicator">
                    <div class="step-circle" data-step="4">4</div>
                    <div class="step-label">Documents</div>
                </div>
                <div class="step-indicator">
                    <div class="step-circle" data-step="5">5</div>
                    <div class="step-label">Review & Submit</div>
                </div>
            </div>
        </div>

        <form id="multiStepForm" novalidate>
            <!-- Step 1: Personal Information -->
            <div class="form-step active" id="step1">
                <div class="form-row">
                    <div class="form-group floating-label">
                        <input type="text" id="firstName" name="firstName" placeholder=" " required>
                        <label for="firstName">First Name *</label>
                        <div class="error-message"></div>
                    </div>
                    <div class="form-group floating-label">
                        <input type="text" id="lastName" name="lastName" placeholder=" " required>
                        <label for="lastName">Last Name *</label>
                        <div class="error-message"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group floating-label">
                        <input type="email" id="email" name="email" placeholder=" " required>
                        <label for="email">Email Address *</label>
                        <div class="error-message"></div>
                    </div>
                    <div class="form-group floating-label">
                        <input type="tel" id="phone" name="phone" placeholder=" " required>
                        <label for="phone">Phone Number *</label>
                        <div class="error-message"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group floating-label">
                        <input type="password" id="password" name="password" placeholder=" " required>
                        <label for="password">Create Password *</label>
                        <div class="strength-meter">
                            <div class="strength-fill" id="strengthFill"></div>
                        </div>
                        <div class="error-message"></div>
                    </div>
                    <div class="form-group floating-label">
                        <input type="password" id="confirmPassword" name="confirmPassword" placeholder=" " required>
                        <label for="confirmPassword">Confirm Password *</label>
                        <div class="error-message"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="dateOfBirth">Date of Birth *</label>
                        <input type="date" id="dateOfBirth" name="dateOfBirth" required>
                        <div class="error-message"></div>
                    </div>
                    <div class="form-group">
                        <label for="gender">Gender</label>
                        <select id="gender" name="gender">
                            <option value="">Select Gender</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                            <option value="prefer-not-to-say">Prefer not to say</option>
                        </select>
                        <div class="error-message"></div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Professional Details -->
            <div class="form-step" id="step2">
                <div class="form-row">
                    <div class="form-group floating-label">
                        <input type="text" id="currentPosition" name="currentPosition" placeholder=" " required>
                        <label for="currentPosition">Current Position *</label>
                        <div class="error-message"></div>
                    </div>
                    <div class="form-group floating-label">
                        <input type="text" id="currentCompany" name="currentCompany" placeholder=" " required>
                        <label for="currentCompany">Current Company *</label>
                        <div class="error-message"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="experience">Years of Experience *</label>
                        <select id="experience" name="experience" required>
                            <option value="">Select Experience</option>
                            <option value="0-1">0-1 years</option>
                            <option value="2-5">2-5 years</option>
                            <option value="6-10">6-10 years</option>
                            <option value="11-15">11-15 years</option>
                            <option value="16+">16+ years</option>
                        </select>
                        <div class="error-message"></div>
                    </div>
                    <div class="form-group">
                        <label for="desiredPosition">Desired Position *</label>
                        <select id="desiredPosition" name="desiredPosition" required>
                            <option value="">Select Position</option>
                            <option value="software-engineer">Software Engineer</option>
                            <option value="data-scientist">Data Scientist</option>
                            <option value="product-manager">Product Manager</option>
                            <option value="ux-designer">UX Designer</option>
                            <option value="cloud-architect">Cloud Architect</option>
                            <option value="devops-engineer">DevOps Engineer</option>
                            <option value="other">Other</option>
                        </select>
                        <div class="error-message"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group floating-label">
                        <input type="text" id="address" name="address" placeholder=" " required>
                        <label for="address">Address *</label>
                        <div class="error-message"></div>
                    </div>
                    <div class="form-group floating-label">
                        <input type="text" id="city" name="city" placeholder=" " required>
                        <label for="city">City *</label>
                        <div class="error-message"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group floating-label">
                        <input type="text" id="state" name="state" placeholder=" " required>
                        <label for="state">State/Province *</label>
                        <div class="error-message"></div>
                    </div>
                    <div class="form-group floating-label">
                        <input type="text" id="zipCode" name="zipCode" placeholder=" " required>
                        <label for="zipCode">ZIP/Postal Code *</label>
                        <div class="error-message"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="workAuthorization">Work Authorization *</label>
                    <select id="workAuthorization" name="workAuthorization" required>
                        <option value="">Select Authorization Status</option>
                        <option value="us-citizen">U.S. Citizen</option>
                        <option value="permanent-resident">Permanent Resident</option>
                        <option value="h1b">H1B Visa</option>
                        <option value="l1">L1 Visa</option>
                        <option value="opt">F1 OPT</option>
                        <option value="other">Other</option>
                    </select>
                    <div class="error-message"></div>
                </div>
            </div>

            <!-- Step 3: Education & Skills -->
            <div class="form-step" id="step3">
                <div class="form-row">
                    <div class="form-group">
                        <label for="highestDegree">Highest Degree *</label>
                        <select id="highestDegree" name="highestDegree" required>
                            <option value="">Select Degree</option>
                            <option value="high-school">High School</option>
                            <option value="associates">Associate's Degree</option>
                            <option value="bachelors">Bachelor's Degree</option>
                            <option value="masters">Master's Degree</option>
                            <option value="phd">Ph.D.</option>
                            <option value="other">Other</option>
                        </select>
                        <div class="error-message"></div>
                    </div>
                    <div class="form-group floating-label">
                        <input type="text" id="fieldOfStudy" name="fieldOfStudy" placeholder=" " required>
                        <label for="fieldOfStudy">Field of Study *</label>
                        <div class="error-message"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group floating-label">
                        <input type="text" id="university" name="university" placeholder=" " required>
                        <label for="university">University/Institution *</label>
                        <div class="error-message"></div>
                    </div>
                    <div class="form-group">
                        <label for="graduationYear">Graduation Year *</label>
                        <input type="number" id="graduationYear" name="graduationYear" min="1950" max="2030" required>
                        <div class="error-message"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="technicalSkills">Technical Skills *</label>
                    <textarea id="technicalSkills" name="technicalSkills" placeholder="List your technical skills (e.g., JavaScript, Python, React, Azure, etc.)" required></textarea>
                    <div class="error-message"></div>
                </div>
                <div class="form-group">
                    <label for="certifications">Certifications</label>
                    <textarea id="certifications" name="certifications" placeholder="List any relevant certifications (e.g., Microsoft Azure, AWS, Google Cloud, etc.)"></textarea>
                    <div class="error-message"></div>
                </div>
                <div class="form-group floating-label">
                    <input type="url" id="portfolio" name="portfolio" placeholder=" ">
                    <label for="portfolio">Portfolio/LinkedIn URL</label>
                    <div class="error-message"></div>
                </div>
                <div class="form-group floating-label">
                    <input type="url" id="github" name="github" placeholder=" ">
                    <label for="github">GitHub Profile URL</label>
                    <div class="error-message"></div>
                </div>
            </div>

            <!-- Step 4: Documents -->
            <div class="form-step" id="step4">
                <div class="form-group">
                    <label>Resume/CV *</label>
                    <div class="file-upload" id="resumeUpload">
                        <div class="file-upload-icon">üìÑ</div>
                        <div class="file-upload-text">
                            <strong>Click to upload</strong> or drag and drop your resume<br>
                            <small>PDF, DOC, DOCX (Max 5MB)</small>
                        </div>
                        <input type="file" id="resume" name="resume" accept=".pdf,.doc,.docx" required>
                    </div>
                    <div class="uploaded-files" id="resumeFiles"></div>
                    <div class="error-message"></div>
                </div>
                
                <div class="form-group">
                    <label>Cover Letter</label>
                    <div class="file-upload" id="coverLetterUpload">
                        <div class="file-upload-icon">üìù</div>
                        <div class="file-upload-text">
                            <strong>Click to upload</strong> or drag and drop your cover letter<br>
                            <small>PDF, DOC, DOCX (Max 5MB)</small>
                        </div>
                        <input type="file" id="coverLetter" name="coverLetter" accept=".pdf,.doc,.docx">
                    </div>
                    <div class="uploaded-files" id="coverLetterFiles"></div>
                    <div class="error-message"></div>
                </div>

                <div class="form-group">
                    <label>Additional Documents</label>
                    <div class="file-upload" id="additionalDocsUpload">
                        <div class="file-upload-icon">üìé</div>
                        <div class="file-upload-text">
                            <strong>Click to upload</strong> or drag and drop additional documents<br>
                            <small>PDF, DOC, DOCX (Max 5MB each, up to 3 files)</small>
                        </div>
                        <input type="file" id="additionalDocs" name="additionalDocs" accept=".pdf,.doc,.docx" multiple>
                    </div>
                    <div class="uploaded-files" id="additionalDocsFiles"></div>
                    <div class="error-message"></div>
                </div>

                <div class="form-group">
                    <label for="additionalInfo">Additional Information</label>
                    <textarea id="additionalInfo" name="additionalInfo" placeholder="Any additional information you'd like to share about your background, achievements, or why you want to join Microsoft..."></textarea>
                    <div class="error-message"></div>
                </div>
            </div>

            <!-- Step 5: Review & Submit -->
            <div class="form-step" id="step5">
                <div class="review-section">
                    <h3>Personal Information</h3>
                    <div id="personalReview"></div>
                </div>
                <div class="review-section">
                    <h3>Professional Details</h3>
                    <div id="professionalReview"></div>
                </div>
                <div class="review-section">
                    <h3>Education & Skills</h3>
                    <div id="educationReview"></div>
                </div>
                <div class="review-section">
                    <h3>Documents</h3>
                    <div id="documentsReview"></div>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="termsAgree" name="termsAgree" required>
                    <label for="termsAgree">I agree to the <a href="#" style="color: #0078d4;">Terms of Service</a> and <a href="#" style="color: #0078d4;">Privacy Policy</a> *</label>
                </div>
                
                <div class="checkbox-group">
                    <input type="checkbox" id="marketingOptIn" name="marketingOptIn">
                    <label for="marketingOptIn">I would like to receive updates about Microsoft career opportunities and company news</label>
                </div>
            </div>

            <!-- Success Message -->
            <div class="form-step" id="successStep" style="display: none;">
                <div class="success-message">
                    <div class="success-icon">‚úÖ</div>
                    <h2>Application Submitted Successfully!</h2>
                    <p>Thank you for applying to Microsoft. We have received your application and will review it carefully. You should receive a confirmation email shortly.</p>
                    <p>Our recruitment team will contact you within 5-7 business days if your profile matches our current openings.</p>
                </div>
            </div>

            <div class="form-buttons">
                <button type="button" class="btn btn-secondary" id="prevBtn" style="display: none;">Previous</button>
                <div style="flex: 1;"></div>
                <button type="button" class="btn btn-primary" id="nextBtn">
                    <span class="loading-spinner" id="loadingSpinner"></span>
                    Next
                </button>
            </div>
        </form>
    </div>

    <script>
        class MultiStepForm {
            constructor() {
                this.currentStep = 1;
                this.totalSteps = 5;
                this.formData = {};
                this.uploadedFiles = {
                    resume: null,
                    coverLetter: null,
                    additionalDocs: []
                };
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateProgress();
                this.setupFileUploads();
                this.setupPasswordStrength();
                this.setupRealTimeValidation();
            }

            setupEventListeners() {
                document.getElementById('nextBtn').addEventListener('click', () => this.nextStep());
                document.getElementById('prevBtn').addEventListener('click', () => this.prevStep());
                
                // Add keyboard navigation
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey && e.key === 'Enter') {
                        this.nextStep();
                    }
                });
            }

            setupRealTimeValidation() {
                const inputs = document.querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                    input.addEventListener('blur', () => this.validateField(input));
                    input.addEventListener('input', () => this.clearError(input));
                });

                // Special validation for email
                document.getElementById('email').addEventListener('input', (e) => {
                    this.validateEmail(e.target);
                });

                // Special validation for phone
                document.getElementById('phone').addEventListener('input', (e) => {
                    this.formatPhoneNumber(e.target);
                });

                // Password confirmation validation
                document.getElementById('confirmPassword').addEventListener('input', (e) => {
                    this.validatePasswordMatch();
                });
            }

            setupPasswordStrength() {
                const passwordInput = document.getElementById('password');
                const strengthFill = document.getElementById('strengthFill');

                passwordInput.addEventListener('input', (e) => {
                    const password = e.target.value;
                    const strength = this.calculatePasswordStrength(password);
                    this.updatePasswordStrength(strength);
                });
            }

            calculatePasswordStrength(password) {
                let score = 0;
                const checks = {
                    length: password.length >= 8,
                    lowercase: /[a-z]/.test(password),
                    uppercase: /[A-Z]/.test(password),
                    numbers: /\d/.test(password),
                    symbols: /[!@#$%^&*(),.?":{}|<>]/.test(password)
                };

                Object.values(checks).forEach(check => {
                    if (check) score += 20;
                });

                return Math.min(100, score);
            }

            updatePasswordStrength(strength) {
                const strengthFill = document.getElementById('strengthFill');
                strengthFill.style.width = strength + '%';
                
                strengthFill.className = 'strength-fill';
                if (strength < 40) {
                    strengthFill.classList.add('strength-weak');
                } else if (strength < 80) {
                    strengthFill.classList.add('strength-medium');
                } else {
                    strengthFill.classList.add('strength-strong');
                }
            }

            setupFileUploads() {
                this.setupFileUpload('resume', 'resumeUpload', 'resumeFiles', false);
                this.setupFileUpload('coverLetter', 'coverLetterUpload', 'coverLetterFiles', false);
                this.setupFileUpload('additionalDocs', 'additionalDocsUpload', 'additionalDocsFiles', true);
            }

            setupFileUpload(inputId, uploadId, filesId, multiple) {
                const input = document.getElementById(inputId);
                const uploadArea = document.getElementById(uploadId);
                const filesContainer = document.getElementById(filesId);

                // Click to upload
                uploadArea.addEventListener('click', () => input.click());

                // Drag and drop
                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('drag-over');
                });

                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('drag-over');
                });

                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('drag-over');
                    
                    const files = Array.from(e.dataTransfer.files);
                    this.handleFileUpload(files, inputId, filesContainer, multiple);
                });

                // File input change
                input.addEventListener('change', (e) => {
                    const files = Array.from(e.target.files);
                    this.handleFileUpload(files, inputId, filesContainer, multiple);
                });
            }

            handleFileUpload(files, inputId, filesContainer, multiple) {
                const validTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
                const maxSize = 5 * 1024 * 1024; // 5MB

                files.forEach(file => {
                    if (!validTypes.includes(file.type)) {
                        this.showError(`${file.name} is not a valid file type. Please upload PDF, DOC, or DOCX files.`);
                        return;
                    }

                    if (file.size > maxSize) {
                        this.showError(`${file.name} is too large. Maximum file size is 5MB.`);
                        return;
                    }

                    if (multiple) {
                        if (this.uploadedFiles[inputId].length >= 3) {
                            this.showError('Maximum 3 additional documents allowed.');
                            return;
                        }
                        this.uploadedFiles[inputId].push(file);
                    } else {
                        this.uploadedFiles[inputId] = file;
                    }

                    this.displayUploadedFile(file, inputId, filesContainer, multiple);
                });
            }

            displayUploadedFile(file, inputId, filesContainer, multiple) {
                const fileDiv = document.createElement('div');
                fileDiv.className = 'uploaded-file';
                fileDiv.innerHTML = `
                    <span class="uploaded-file-name">${file.name}</span>
                    <span class="uploaded-file-remove" onclick="multiStepForm.removeFile('${inputId}', '${file.name}', this, ${multiple})">Remove</span>
                `;
                filesContainer.appendChild(fileDiv);
            }

            removeFile(inputId, fileName, element, multiple) {
                if (multiple) {
                    this.uploadedFiles[inputId] = this.uploadedFiles[inputId].filter(f => f.name !== fileName);
                } else {
                    this.uploadedFiles[inputId] = null;
                }
                element.parentElement.remove();
            }

            validateField(field) {
                const value = field.value.trim();
                const fieldName = field.name;
                let isValid = true;
                let errorMessage = '';

                // Reset field state
                this.clearError(field);

                // Required field validation
                if (field.required && !value) {
                    errorMessage = `${this.getFieldLabel(field)} is required.`;
                    isValid = false;
                }

                // Specific field validations
                switch (fieldName) {
                    case 'email':
                        if (value && !this.isValidEmail(value)) {
                            errorMessage = 'Please enter a valid email address.';
                            isValid = false;
                        }
                        break;
                    case 'phone':
                        if (value && !this.isValidPhone(value)) {
                            errorMessage = 'Please enter a valid phone number.';
                            isValid = false;
                        }
                        break;
                    case 'password':
                        if (value && value.length < 8) {
                            errorMessage = 'Password must be at least 8 characters long.';
                            isValid = false;
                        }
                        break;
                    case 'confirmPassword':
                        const password = document.getElementById('password').value;
                        if (value && value !== password) {
                            errorMessage = 'Passwords do not match.';
                            isValid = false;
                        }
                        break;
                    case 'dateOfBirth':
                        if (value && !this.isValidAge(value)) {
                            errorMessage = 'You must be at least 18 years old.';
                            isValid = false;
                        }
                        break;
                    case 'zipCode':
                        if (value && !this.isValidZipCode(value)) {
                            errorMessage = 'Please enter a valid ZIP/postal code.';
                            isValid = false;
                        }
                        break;
                    case 'graduationYear':
                        const currentYear = new Date().getFullYear();
                        if (value && (value < 1950 || value > currentYear + 10)) {
                            errorMessage = 'Please enter a valid graduation year.';
                            isValid = false;
                        }
                        break;
                    case 'portfolio':
                    case 'github':
                        if (value && !this.isValidURL(value)) {
                            errorMessage = 'Please enter a valid URL.';
                            isValid = false;
                        }
                        break;
                }

                if (!isValid) {
                    this.showFieldError(field, errorMessage);
                } else {
                    this.showFieldSuccess(field);
                }

                return isValid;
            }

            isValidEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }

            isValidPhone(phone) {
                const phoneRegex = /^[\+]?[1-9][\d]{0,15}$/;
                return phoneRegex.test(phone.replace(/[\s\-\(\)]/g, ''));
            }

            isValidAge(dateOfBirth) {
                const today = new Date();
                const birthDate = new Date(dateOfBirth);
                const age = today.getFullYear() - birthDate.getFullYear();
                const monthDiff = today.getMonth() - birthDate.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                
                return age >= 18;
            }

            isValidZipCode(zipCode) {
                const zipRegex = /^[0-9]{5}(-[0-9]{4})?$|^[A-Za-z]\d[A-Za-z] \d[A-Za-z]\d$/;
                return zipRegex.test(zipCode);
            }

            isValidURL(url) {
                try {
                    new URL(url);
                    return true;
                } catch {
                    return false;
                }
            }

            formatPhoneNumber(input) {
                let value = input.value.replace(/\D/g, '');
                if (value.length >= 6) {
                    value = value.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
                } else if (value.length >= 3) {
                    value = value.replace(/(\d{3})(\d{0,3})/, '($1) $2');
                }
                input.value = value;
            }

            validateEmail(input) {
                const email = input.value.trim();
                if (email && this.isValidEmail(email)) {
                    this.showFieldSuccess(input);
                }
            }

            validatePasswordMatch() {
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                if (confirmPassword && password !== confirmPassword) {
                    this.showFieldError(document.getElementById('confirmPassword'), 'Passwords do not match.');
                } else if (confirmPassword && password === confirmPassword) {
                    this.showFieldSuccess(document.getElementById('confirmPassword'));
                }
            }

            getFieldLabel(field) {
                const label = field.parentElement.querySelector('label');
                return label ? label.textContent.replace(' *', '') : field.name;
            }

            showFieldError(field, message) {
                const formGroup = field.closest('.form-group');
                const errorElement = formGroup.querySelector('.error-message');
                
                formGroup.classList.add('error');
                formGroup.classList.remove('success');
                errorElement.textContent = message;
            }

            showFieldSuccess(field) {
                const formGroup = field.closest('.form-group');
                formGroup.classList.add('success');
                formGroup.classList.remove('error');
            }

            clearError(field) {
                const formGroup = field.closest('.form-group');
                formGroup.classList.remove('error');
            }

            showError(message) {
                // Create a temporary error message
                const errorDiv = document.createElement('div');
                errorDiv.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #d13438;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 8px;
                    z-index: 1000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                `;
                errorDiv.textContent = message;
                document.body.appendChild(errorDiv);

                setTimeout(() => {
                    errorDiv.remove();
                }, 5000);
            }

            validateStep(step) {
                const currentStepElement = document.getElementById(`step${step}`);
                const requiredFields = currentStepElement.querySelectorAll('[required]');
                let isValid = true;

                requiredFields.forEach(field => {
                    if (!this.validateField(field)) {
                        isValid = false;
                    }
                });

                // Special validations for step 4 (Documents)
                if (step === 4) {
                    if (!this.uploadedFiles.resume) {
                        this.showError('Please upload your resume.');
                        isValid = false;
                    }
                }

                // Special validations for step 5 (Terms)
                if (step === 5) {
                    const termsCheckbox = document.getElementById('termsAgree');
                    if (!termsCheckbox.checked) {
                        this.showError('Please agree to the Terms of Service and Privacy Policy.');
                        isValid = false;
                    }
                }

                return isValid;
            }

            collectFormData() {
                const formData = new FormData();
                const inputs = document.querySelectorAll('input, select, textarea');
                
                inputs.forEach(input => {
                    if (input.type === 'checkbox') {
                        formData.append(input.name, input.checked);
                    } else if (input.type !== 'file') {
                        formData.append(input.name, input.value);
                    }
                });

                // Add files
                if (this.uploadedFiles.resume) {
                    formData.append('resume', this.uploadedFiles.resume);
                }
                if (this.uploadedFiles.coverLetter) {
                    formData.append('coverLetter', this.uploadedFiles.coverLetter);
                }
                this.uploadedFiles.additionalDocs.forEach((file, index) => {
                    formData.append(`additionalDoc${index}`, file);
                });

                return formData;
            }

            generateReviewData() {
                const formData = this.collectFormData();
                const data = {};
                
                for (let [key, value] of formData.entries()) {
                    if (key !== 'password' && key !== 'confirmPassword') {
                        data[key] = value;
                    }
                }

                return data;
            }

            populateReviewStep() {
                const data = this.generateReviewData();
                
                // Personal Information
                const personalReview = document.getElementById('personalReview');
                personalReview.innerHTML = `
                    <div class="review-item">
                        <span class="review-label">Name:</span>
                        <span class="review-value">${data.firstName} ${data.lastName}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Email:</span>
                        <span class="review-value">${data.email}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Phone:</span>
                        <span class="review-value">${data.phone}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Date of Birth:</span>
                        <span class="review-value">${data.dateOfBirth}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Gender:</span>
                        <span class="review-value">${data.gender || 'Not specified'}</span>
                    </div>
                `;

                // Professional Details
                const professionalReview = document.getElementById('professionalReview');
                professionalReview.innerHTML = `
                    <div class="review-item">
                        <span class="review-label">Current Position:</span>
                        <span class="review-value">${data.currentPosition}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Current Company:</span>
                        <span class="review-value">${data.currentCompany}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Experience:</span>
                        <span class="review-value">${data.experience} years</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Desired Position:</span>
                        <span class="review-value">${data.desiredPosition}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Address:</span>
                        <span class="review-value">${data.address}, ${data.city}, ${data.state} ${data.zipCode}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Work Authorization:</span>
                        <span class="review-value">${data.workAuthorization}</span>
                    </div>
                `;

                // Education & Skills
                const educationReview = document.getElementById('educationReview');
                educationReview.innerHTML = `
                    <div class="review-item">
                        <span class="review-label">Highest Degree:</span>
                        <span class="review-value">${data.highestDegree}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Field of Study:</span>
                        <span class="review-value">${data.fieldOfStudy}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">University:</span>
                        <span class="review-value">${data.university}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Graduation Year:</span>
                        <span class="review-value">${data.graduationYear}</span>
                    </div>
                    <div class="review-item">
                        <span class="review-label">Technical Skills:</span>
                        <span class="review-value">${data.technicalSkills}</span>
                    </div>
                    ${data.certifications ? `
                    <div class="review-item">
                        <span class="review-label">Certifications:</span>
                        <span class="review-value">${data.certifications}</span>
                    </div>` : ''}
                    ${data.portfolio ? `
                    <div class="review-item">
                        <span class="review-label">Portfolio:</span>
                        <span class="review-value">${data.portfolio}</span>
                    </div>` : ''}
                    ${data.github ? `
                    <div class="review-item">
                        <span class="review-label">GitHub:</span>
                        <span class="review-value">${data.github}</span>
                    </div>` : ''}
                `;

                // Documents
                const documentsReview = document.getElementById('documentsReview');
                let documentsHTML = '';
                
                if (this.uploadedFiles.resume) {
                    documentsHTML += `
                    <div class="review-item">
                        <span class="review-label">Resume:</span>
                        <span class="review-value">${this.uploadedFiles.resume.name}</span>
                    </div>`;
                }
                
                if (this.uploadedFiles.coverLetter) {
                    documentsHTML += `
                    <div class="review-item">
                        <span class="review-label">Cover Letter:</span>
                        <span class="review-value">${this.uploadedFiles.coverLetter.name}</span>
                    </div>`;
                }
                
                if (this.uploadedFiles.additionalDocs.length > 0) {
                    documentsHTML += `
                    <div class="review-item">
                        <span class="review-label">Additional Documents:</span>
                        <span class="review-value">${this.uploadedFiles.additionalDocs.map(f => f.name).join(', ')}</span>
                    </div>`;
                }

                if (data.additionalInfo) {
                    documentsHTML += `
                    <div class="review-item">
                        <span class="review-label">Additional Information:</span>
                        <span class="review-value">${data.additionalInfo}</span>
                    </div>`;
                }

                documentsReview.innerHTML = documentsHTML;
            }

            nextStep() {
                if (this.currentStep < this.totalSteps) {
                    if (this.validateStep(this.currentStep)) {
                        this.currentStep++;
                        this.updateStep();
                    }
                } else {
                    this.submitForm();
                }
            }

            prevStep() {
                if (this.currentStep > 1) {
                    this.currentStep--;
                    this.updateStep();
                }
            }

            updateStep() {
                // Hide all steps
                document.querySelectorAll('.form-step').forEach(step => {
                    step.classList.remove('active');
                });

                // Show current step
                document.getElementById(`step${this.currentStep}`).classList.add('active');

                // Update step indicators
                document.querySelectorAll('.step-circle').forEach((circle, index) => {
                    circle.classList.remove('active', 'completed');
                    const label = circle.parentElement.querySelector('.step-label');
                    label.classList.remove('active');
                    
                    if (index + 1 < this.currentStep) {
                        circle.classList.add('completed');
                    } else if (index + 1 === this.currentStep) {
                        circle.classList.add('active');
                        label.classList.add('active');
                    }
                });

                // Update progress bar
                this.updateProgress();

                // Update buttons
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');

                prevBtn.style.display = this.currentStep > 1 ? 'block' : 'none';
                
                if (this.currentStep === this.totalSteps) {
                    nextBtn.textContent = 'Submit Application';
                    this.populateReviewStep();
                } else {
                    nextBtn.innerHTML = '<span class="loading-spinner" id="loadingSpinner"></span>Next';
                }

                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            updateProgress() {
                const progress = ((this.currentStep - 1) / (this.totalSteps - 1)) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
            }

            async submitForm() {
                const nextBtn = document.getElementById('nextBtn');
                const spinner = document.getElementById('loadingSpinner');
                
                // Show loading state
                nextBtn.disabled = true;
                spinner.style.display = 'inline-block';
                nextBtn.textContent = 'Submitting...';

                try {
                    // Simulate API call
                    await this.simulateSubmission();
                    
                    // Show success step
                    document.querySelectorAll('.form-step').forEach(step => {
                        step.classList.remove('active');
                    });
                    document.getElementById('successStep').style.display = 'block';
                    
                    // Hide form buttons
                    document.querySelector('.form-buttons').style.display = 'none';
                    
                    // Update progress to 100%
                    document.getElementById('progressFill').style.width = '100%';
                    
                    // Mark all steps as completed
                    document.querySelectorAll('.step-circle').forEach(circle => {
                        circle.classList.add('completed');
                        circle.classList.remove('active');
                    });
                    
                } catch (error) {
                    this.showError('There was an error submitting your application. Please try again.');
                    nextBtn.disabled = false;
                    spinner.style.display = 'none';
                    nextBtn.textContent = 'Submit Application';
                }
            }

            async simulateSubmission() {
                // Simulate network delay
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve({ success: true });
                    }, 2000);
                });
            }
        }

        // Initialize the form when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            window.multiStepForm = new MultiStepForm();
        });
    </script>
</body>
</html>